---
import { validateSession, SESSION_COOKIE_NAME } from '@/lib/auth/session';

// Check if user is authenticated
const sessionToken = Astro.cookies.get(SESSION_COOKIE_NAME)?.value;
const sessionData = sessionToken ? await validateSession(sessionToken) : null;

// Redirect based on auth state
if (sessionData) {
  // User is authenticated → go to dashboard
  return Astro.redirect('/dashboard');
} else {
  // User is not authenticated → go to login
  return Astro.redirect('/login');
}
---
